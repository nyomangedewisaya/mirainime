---
interface Props {
  anime: any; 
}

const { anime } = Astro.props;

const formatText = (text: string) => {
  if (!text) return 'Unknown';
  return text.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
};

const formatDate = (dateObj: { year: number, month: number, day: number }) => {
  if (!dateObj || !dateObj.year) return 'TBA';
  const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
  return `${monthNames[dateObj.month - 1] || ''} ${dateObj.day || ''}, ${dateObj.year}`;
};

const isManga = anime.chapters !== undefined || anime.volumes !== undefined;
---

<section class="container mx-auto px-4 lg:px-8 py-8 md:py-12 border-t border-slate-200/50 dark:border-slate-800/50">
  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6 md:gap-8">
    
    <div class="flex flex-col gap-1">
      <span class="text-xs font-bold text-slate-500 uppercase tracking-wider">Format</span>
      <span class="text-sm font-semibold text-slate-900 dark:text-white">{formatText(anime.format)}</span>
    </div>

    {isManga && (
      <>
        <div class="flex flex-col gap-1">
          <span class="text-xs font-bold text-slate-500 uppercase tracking-wider">Chapters</span>
          <span class="text-sm font-semibold text-slate-900 dark:text-white">{anime.chapters || '-'}</span>
        </div>
        <div class="flex flex-col gap-1">
          <span class="text-xs font-bold text-slate-500 uppercase tracking-wider">Volumes</span>
          <span class="text-sm font-semibold text-slate-900 dark:text-white">{anime.volumes || '-'}</span>
        </div>
      </>
    )}

    {!isManga && (
      <>
        <div class="flex flex-col gap-1">
          <span class="text-xs font-bold text-slate-500 uppercase tracking-wider">Episodes</span>
          <span class="text-sm font-semibold text-slate-900 dark:text-white">{anime.episodes || 'TBA'}</span>
        </div>
        <div class="flex flex-col gap-1">
          <span class="text-xs font-bold text-slate-500 uppercase tracking-wider">Duration</span>
          <span class="text-sm font-semibold text-slate-900 dark:text-white">{anime.duration ? `${anime.duration} mins` : 'Unknown'}</span>
        </div>
      </>
    )}

    <div class="flex flex-col gap-1">
      <span class="text-xs font-bold text-slate-500 uppercase tracking-wider">Status</span>
      <span class="text-sm font-semibold text-slate-900 dark:text-white">{formatText(anime.status)}</span>
    </div>
    
    <div class="flex flex-col gap-1">
      <span class="text-xs font-bold text-slate-500 uppercase tracking-wider">Start Date</span>
      <span class="text-sm font-semibold text-slate-900 dark:text-white">{formatDate(anime.startDate)}</span>
    </div>

    <div class="flex flex-col gap-1">
      <span class="text-xs font-bold text-slate-500 uppercase tracking-wider">End Date</span>
      <span class="text-sm font-semibold text-slate-900 dark:text-white">{formatDate(anime.endDate)}</span>
    </div>

    <div class="flex flex-col gap-1">
      <span class="text-xs font-bold text-slate-500 uppercase tracking-wider">Average Score</span>
      <span class="text-sm font-semibold text-slate-900 dark:text-white">{anime.averageScore ? `${anime.averageScore}%` : '-'}</span>
    </div>

    <div class="flex flex-col gap-1">
      <span class="text-xs font-bold text-slate-500 uppercase tracking-wider">Popularity</span>
      <span class="text-sm font-semibold text-slate-900 dark:text-white">{anime.popularity?.toLocaleString()}</span>
    </div>
    
    {anime.synonyms && anime.synonyms.length > 0 && (
      <div class="flex flex-col gap-1 col-span-2 sm:col-span-3 lg:col-span-6">
        <span class="text-xs font-bold text-slate-500 uppercase tracking-wider">Synonyms</span>
        <span class="text-sm font-semibold text-slate-900 dark:text-white leading-relaxed">
          {anime.synonyms.join(', ')}
        </span>
      </div>
    )}

  </div>
</section>